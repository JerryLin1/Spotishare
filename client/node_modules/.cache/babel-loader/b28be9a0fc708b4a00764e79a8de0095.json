{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tiezh\\\\Desktop\\\\Spotishare\\\\client\\\\src\\\\index.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Route, MemoryRouter, Routes } from \"react-router-dom\";\nimport { ClientProvider } from \"./contexts/ClientProvider\";\nimport HomePage from \"./Home\";\nimport Lobby from \"./Lobby\";\nimport PreLobby from \"./PreLobby\";\nimport \"./css/styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nReactDOM.render( /*#__PURE__*/_jsxDEV(React.StrictMode, {\n  children: /*#__PURE__*/_jsxDEV(ClientProvider, {\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/:roomId\",\n          element: /*#__PURE__*/_jsxDEV(PreLobby, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/:roomId/Lobby\",\n          element: /*#__PURE__*/_jsxDEV(Lobby, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 59\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 5\n}, this), document.getElementById(\"root\"));\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (localStorage.getItem(\"spotify-access-token\") && localStorage.getItem(\"spotify-access-token-expiry\") > Date.now()) {//TODO: Tell user to login?\n  }\n\n  if (window.location.pathname == \"/auth/callback\") {\n    fetch(\"/auth/callback\" + window.location.search).then(e => e.json()).then(data => {\n      localStorage.setItem(\"spotify-access-token\", data.accessToken);\n      localStorage.setItem(\"spotify-access-token-expiry\", Date.now() + data.expiresIn * 990);\n      localStorage.setItem(\"spotify-refresh-token\", data.refreshToken);\n      window.location = localStorage.getItem(\"prev-location\") || \"/\";\n    });\n  }\n});\nexport function isLoggedIn() {\n  return localStorage.getItem(\"spotify-access-token\") && localStorage.getItem(\"spotify-access-token-expiry\") > Date.now();\n}\nexport async function login() {\n  fetch(\"/auth/login\").then(e => e.json()).then(data => {\n    localStorage.setItem(\"prev-location\", window.location);\n    window.location = data.redirectUri;\n  }).catch(error => {\n    console.log(\"Failed to prepare for Spotify Authentication\");\n  });\n}","map":{"version":3,"sources":["C:/Users/Tiezh/Desktop/Spotishare/client/src/index.js"],"names":["React","ReactDOM","BrowserRouter","Route","MemoryRouter","Routes","ClientProvider","HomePage","Lobby","PreLobby","render","document","getElementById","addEventListener","localStorage","getItem","Date","now","window","location","pathname","fetch","search","then","e","json","data","setItem","accessToken","expiresIn","refreshToken","isLoggedIn","login","redirectUri","catch","error","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Route, MemoryRouter, Routes } from \"react-router-dom\";\nimport { ClientProvider } from \"./contexts/ClientProvider\";\nimport HomePage from \"./Home\";\nimport Lobby from \"./Lobby\";\nimport PreLobby from \"./PreLobby\";\n\nimport \"./css/styles.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <ClientProvider>\n            <BrowserRouter>\n                <Routes>\n                    <Route path=\"/\" element={<HomePage />}></Route>\n                    <Route path=\"/:roomId\" element={<PreLobby />}></Route>\n                    <Route path=\"/:roomId/Lobby\" element={<Lobby />}></Route>\n                </Routes>\n            </BrowserRouter>\n        </ClientProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    if (\n        localStorage.getItem(\"spotify-access-token\") &&\n        localStorage.getItem(\"spotify-access-token-expiry\") > Date.now()\n    ) {\n        //TODO: Tell user to login?\n    }\n    if (window.location.pathname == \"/auth/callback\") {\n        fetch(\"/auth/callback\" + window.location.search)\n            .then((e) => e.json())\n            .then((data) => {\n                localStorage.setItem(\"spotify-access-token\", data.accessToken);\n                localStorage.setItem(\"spotify-access-token-expiry\", Date.now() + data.expiresIn * 990);\n                localStorage.setItem(\"spotify-refresh-token\", data.refreshToken);\n                window.location = localStorage.getItem(\"prev-location\") || \"/\";\n            });\n    }\n});\n\nexport function isLoggedIn() {\n    return (\n        localStorage.getItem(\"spotify-access-token\") && localStorage.getItem(\"spotify-access-token-expiry\") > Date.now()\n    );\n}\nexport async function login() {\n    fetch(\"/auth/login\")\n        .then((e) => e.json())\n        .then((data) => {\n            localStorage.setItem(\"prev-location\", window.location);\n            window.location = data.redirectUri;\n        })\n        .catch((error) => {\n            console.log(\"Failed to prepare for Spotify Authentication\");\n        });\n}\n"]},"metadata":{},"sourceType":"module"}